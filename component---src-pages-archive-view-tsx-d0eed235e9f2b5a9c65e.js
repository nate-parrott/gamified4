"use strict";(self.webpackChunkmy_gatsby_site=self.webpackChunkmy_gatsby_site||[]).push([[232],{4802:function(e,t,n){n.r(t),n.d(t,{Head:function(){return s},default:function(){return r}});var l=n(7294),o=n(7237),i=n(5596);function a(){const{allItems:e}=(0,o.k)(),t=(0,l.useMemo)((()=>e.filter((e=>"file"===e.type&&("image"===e.fileType||"video"===e.fileType)))),[e]),{0:n,1:a}=(0,l.useState)(null),{0:r,1:s}=(0,l.useState)(!0);(0,l.useEffect)((()=>{const e=()=>{if("undefined"==typeof window)return;const e=window.location.hash.match(/#view=(.+)/);if(e){const t=decodeURIComponent(e[1]);a(t)}else a(null)};return e(),window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)}),[]);const c=(0,l.useMemo)((()=>n?t.findIndex((e=>e.path===n)):-1),[n,t]),u=c>=0?t[c]:null,d=(0,l.useCallback)((e=>{if(e<0||e>=t.length)return;const n=t[e],l=encodeURIComponent(n.path);window.history.replaceState(null,"",`#view=${l}`),a(n.path)}),[t]),m=(0,l.useCallback)((()=>{c>0&&(d(c-1),s(!1))}),[c,d]),h=(0,l.useCallback)((()=>{c<t.length-1&&(d(c+1),s(!1))}),[c,t.length,d]),b=(0,l.useCallback)((()=>{window.close()}),[]);if((0,l.useEffect)((()=>{if(!u)return;const e=e=>{"ArrowLeft"===e.key?(e.preventDefault(),m()):"ArrowRight"===e.key?(e.preventDefault(),h()):"Escape"===e.key&&(e.preventDefault(),b())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[u,m,h,b]),(0,l.useEffect)((()=>{const e=()=>{s(!0)};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}),[]),!u)return null;const v=c>0,w=c<t.length-1;return l.createElement("div",{className:"lightbox-overlay "+(r?"":"cursor-hidden")},l.createElement("div",{className:"lightbox-content"},"video"===u.fileType?l.createElement("video",{key:u.path,src:(0,i.dq)("archive/"+u.path),autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"lightbox-media"}):l.createElement("img",{key:u.path,src:(0,i.dq)("archive/"+u.path),alt:u.name,className:"lightbox-media"})),l.createElement("div",{className:"lightbox-controls "+(r?"visible":"hidden")},l.createElement("div",{className:"lightbox-gradient"}),l.createElement("div",{className:"lightbox-label"},u.name),l.createElement("div",{className:"lightbox-buttons"},l.createElement("button",{className:"lightbox-button lightbox-button-prev",onClick:m,disabled:!v,"aria-label":"Previous"},l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("polyline",{points:"15 18 9 12 15 6"}))),l.createElement("button",{className:"lightbox-button lightbox-button-close",onClick:b,"aria-label":"Close"},l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))),l.createElement("button",{className:"lightbox-button lightbox-button-next",onClick:h,disabled:!w,"aria-label":"Next"},l.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("polyline",{points:"9 18 15 12 9 6"}))))))}function r(){return l.createElement(a,null)}const s=()=>l.createElement(l.Fragment,null,l.createElement("title",null,"Archive Viewer"),l.createElement("meta",{name:"robots",content:"noindex"}),l.createElement("style",null,"\n      body {\n        margin: 0;\n        padding: 0;\n        overflow: hidden;\n      }\n    "))}}]);
//# sourceMappingURL=component---src-pages-archive-view-tsx-d0eed235e9f2b5a9c65e.js.map