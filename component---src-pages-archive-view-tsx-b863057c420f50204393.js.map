{"version":3,"file":"component---src-pages-archive-view-tsx-b863057c420f50204393.js","mappings":"8NAMO,SAASA,IACd,MAAM,SAAEC,IAAaC,EAAAA,EAAAA,KAGfC,GAAgBC,EAAAA,EAAAA,UAAQ,IACrBH,EAASI,QAAOC,GACP,SAAdA,EAAKC,OAAsC,UAAlBD,EAAKE,UAA0C,UAAlBF,EAAKE,aAE5D,CAACP,KAEE,EAACQ,EAAW,EAAEC,IAAkBC,EAAAA,EAAAA,UAAwB,OACxD,EAACC,EAAe,EAAEC,IAAsBF,EAAAA,EAAAA,WAAS,IAGvDG,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAWA,KACf,GAAsB,oBAAXC,OAAwB,OACnC,MACMC,EADOD,OAAOE,SAASC,KACVF,MAAM,cACzB,GAAIA,EAAO,CACT,MAAMG,EAAOC,mBAAmBJ,EAAM,IACtCP,EAAeU,EACjB,MACEV,EAAe,KACjB,EAKF,OAFAK,IACAC,OAAOM,iBAAiB,aAAcP,GAC/B,IAAMC,OAAOO,oBAAoB,aAAcR,EAAS,GAC9D,IAEH,MAAMS,GAAepB,EAAAA,EAAAA,UAAQ,IACtBK,EACEN,EAAcsB,WAAUnB,GAAQA,EAAKc,OAASX,KAD3B,GAEzB,CAACA,EAAaN,IAEXuB,EAAcF,GAAgB,EAAIrB,EAAcqB,GAAgB,KAChEG,EAAWH,EAAe,EAAIrB,EAAcqB,EAAe,GAAK,KAChEI,EAAWJ,GAAgB,GAAKA,EAAerB,EAAc0B,OAAS,EACxE1B,EAAcqB,EAAe,GAC7B,KAEEM,GAAaC,EAAAA,EAAAA,cAAaC,IAC9B,GAAIA,EAAQ,GAAKA,GAAS7B,EAAc0B,OAAQ,OAChD,MAAMvB,EAAOH,EAAc6B,GACrBC,EAAcC,mBAAmB5B,EAAKc,MAE5CJ,OAAOmB,QAAQC,aAAa,KAAM,GAAI,SAASH,KAC/CvB,EAAeJ,EAAKc,KAAK,GACxB,CAACjB,IAEEkC,GAAeN,EAAAA,EAAAA,cAAY,KAC3BP,EAAe,GACjBM,EAAWN,EAAe,EAC5B,GACC,CAACA,EAAcM,IAEZQ,GAAeP,EAAAA,EAAAA,cAAY,KAC3BP,EAAerB,EAAc0B,OAAS,GACxCC,EAAWN,EAAe,EAC5B,GACC,CAACA,EAAcrB,EAAc0B,OAAQC,IAElCS,GAAQR,EAAAA,EAAAA,cAAY,KAExBf,OAAOuB,OAAO,GACb,IAmCH,IAhCAzB,EAAAA,EAAAA,YAAU,KACR,IAAKY,EAAa,OAElB,MAAMc,EAAiBC,IACP,cAAVA,EAAEC,KACJD,EAAEE,iBACFN,IACAxB,GAAmB,IACA,eAAV4B,EAAEC,KACXD,EAAEE,iBACFL,IACAzB,GAAmB,IACA,WAAV4B,EAAEC,MACXD,EAAEE,iBACFJ,IACF,EAIF,OADAvB,OAAOM,iBAAiB,UAAWkB,GAC5B,IAAMxB,OAAOO,oBAAoB,UAAWiB,EAAc,GAChE,CAACd,EAAaW,EAAcC,EAAcC,KAG7CzB,EAAAA,EAAAA,YAAU,KACR,MAAM8B,EAAkBA,KACtB/B,GAAmB,EAAK,EAI1B,OADAG,OAAOM,iBAAiB,YAAasB,GAC9B,IAAM5B,OAAOO,oBAAoB,YAAaqB,EAAgB,GACpE,KAEElB,EAAa,OAAO,KAEzB,MAAMmB,IAAclB,EACdmB,IAAclB,EAEdmB,EAAc,SAACzC,EAAmB0C,QAAM,IAANA,IAAAA,GAAS,GAC/C,MAAMN,EAAMM,EAAS,WAAW1C,EAAKc,OAASd,EAAKc,KAC7C6B,EAAcD,EAAS,CAAEE,QAAS,aAAoBC,EAE5D,MAAsB,UAAlB7C,EAAKE,SAEL4C,EAAAA,cAAAA,QAAAA,CACEV,IAAKA,EACLW,KAAKC,EAAAA,EAAAA,IAAW,WAAahD,EAAKc,MAClCmC,UAAWP,EACXQ,MAAOR,EACPS,OAAK,EACLC,aAAW,EACXC,QAASX,EAAS,YAASG,EAC3BS,UAAU,iBACVC,MAAOZ,IAMXG,EAAAA,cAAAA,MAAAA,CACEV,IAAKA,EACLW,KAAKC,EAAAA,EAAAA,IAAW,WAAahD,EAAKc,MAClC0C,IAAKxD,EAAKyD,KACVH,UAAU,iBACVC,MAAOZ,GAGb,EAEA,OACEG,EAAAA,cAAAA,MAAAA,CAAKQ,UAAW,qBAAoBhD,EAAkB,GAAK,kBACzDwC,EAAAA,cAAAA,MAAAA,CAAKQ,UAAU,oBACZb,EAAYrB,GACZC,EAAWoB,EAAYpB,GAAU,GAAQ,KACzCC,EAAWmB,EAAYnB,GAAU,GAAQ,MAG5CwB,EAAAA,cAAAA,MAAAA,CAAKQ,UAAW,sBAAqBhD,EAAkB,UAAY,WACjEwC,EAAAA,cAAAA,MAAAA,CAAKQ,UAAU,sBACfR,EAAAA,cAAAA,MAAAA,CAAKQ,UAAU,kBAAkBlC,EAAYqC,MAC7CX,EAAAA,cAAAA,MAAAA,CAAKQ,UAAU,oBACbR,EAAAA,cAAAA,SAAAA,CACEQ,UAAU,uCACVI,QAAS3B,EACT4B,UAAWpB,EACX,aAAW,YAEXO,EAAAA,cAAAA,MAAAA,CAAKc,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IAAIC,cAAc,QAAQC,eAAe,SACrIrB,EAAAA,cAAAA,WAAAA,CAAUsB,OAAO,sBAGrBtB,EAAAA,cAAAA,SAAAA,CACEQ,UAAU,wCACVI,QAASzB,EACT,aAAW,SAEXa,EAAAA,cAAAA,MAAAA,CAAKc,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IAAIC,cAAc,QAAQC,eAAe,SACrIrB,EAAAA,cAAAA,OAAAA,CAAMuB,GAAG,KAAKC,GAAG,IAAIC,GAAG,IAAIC,GAAG,OAC/B1B,EAAAA,cAAAA,OAAAA,CAAMuB,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAAKC,GAAG,SAGnC1B,EAAAA,cAAAA,SAAAA,CACEQ,UAAU,uCACVI,QAAS1B,EACT2B,UAAWnB,EACX,aAAW,QAEXM,EAAAA,cAAAA,MAAAA,CAAKc,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IAAIC,cAAc,QAAQC,eAAe,SACrIrB,EAAAA,cAAAA,WAAAA,CAAUsB,OAAO,uBAO/B,CC1Le,SAASK,IACtB,OAAO3B,EAAAA,cAACpD,EAAc,KACxB,CAGO,MAAMgF,EAAOA,IAClB5B,EAAAA,cAAAA,EAAAA,SAAAA,KACEA,EAAAA,cAAAA,QAAAA,KAAO,kBACPA,EAAAA,cAAAA,OAAAA,CAAMW,KAAK,SAASkB,QAAQ,YAC5B7B,EAAAA,cAAAA,QAAAA,KAAQ,qG","sources":["webpack://my-gatsby-site/./src/components/archive/LightboxViewer.tsx","webpack://my-gatsby-site/./src/pages/archive-view.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useArchiveData } from './useArchiveData';\nimport { ArchiveItem } from './types';\nimport { withPrefix } from '../utils';\nimport './lightbox.css';\n\nexport function LightboxViewer() {\n  const { allItems } = useArchiveData();\n  \n  // Filter to only image and video items\n  const viewableItems = useMemo(() => {\n    return allItems.filter(item => \n      item.type === 'file' && (item.fileType === 'image' || item.fileType === 'video')\n    );\n  }, [allItems]);\n\n  const [currentPath, setCurrentPath] = useState<string | null>(null);\n  const [controlsVisible, setControlsVisible] = useState(true);\n\n  // Read hash on mount and when it changes\n  useEffect(() => {\n    const readHash = () => {\n      if (typeof window === 'undefined') return;\n      const hash = window.location.hash;\n      const match = hash.match(/#view=(.+)/);\n      if (match) {\n        const path = decodeURIComponent(match[1]);\n        setCurrentPath(path);\n      } else {\n        setCurrentPath(null);\n      }\n    };\n\n    readHash();\n    window.addEventListener('hashchange', readHash);\n    return () => window.removeEventListener('hashchange', readHash);\n  }, []);\n\n  const currentIndex = useMemo(() => {\n    if (!currentPath) return -1;\n    return viewableItems.findIndex(item => item.path === currentPath);\n  }, [currentPath, viewableItems]);\n\n  const currentItem = currentIndex >= 0 ? viewableItems[currentIndex] : null;\n  const prevItem = currentIndex > 0 ? viewableItems[currentIndex - 1] : null;\n  const nextItem = currentIndex >= 0 && currentIndex < viewableItems.length - 1\n    ? viewableItems[currentIndex + 1]\n    : null;\n\n  const navigateTo = useCallback((index: number) => {\n    if (index < 0 || index >= viewableItems.length) return;\n    const item = viewableItems[index];\n    const encodedPath = encodeURIComponent(item.path);\n    // Use replaceState to avoid polluting history\n    window.history.replaceState(null, '', `#view=${encodedPath}`);\n    setCurrentPath(item.path);\n  }, [viewableItems]);\n\n  const navigatePrev = useCallback(() => {\n    if (currentIndex > 0) {\n      navigateTo(currentIndex - 1);\n    }\n  }, [currentIndex, navigateTo]);\n\n  const navigateNext = useCallback(() => {\n    if (currentIndex < viewableItems.length - 1) {\n      navigateTo(currentIndex + 1);\n    }\n  }, [currentIndex, viewableItems.length, navigateTo]);\n\n  const close = useCallback(() => {\n    // Close the window/tab\n    window.close();\n  }, []);\n\n  // Keyboard navigation\n  useEffect(() => {\n    if (!currentItem) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'ArrowLeft') {\n        e.preventDefault();\n        navigatePrev();\n        setControlsVisible(false);\n      } else if (e.key === 'ArrowRight') {\n        e.preventDefault();\n        navigateNext();\n        setControlsVisible(false);\n      } else if (e.key === 'Escape') {\n        e.preventDefault();\n        close();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [currentItem, navigatePrev, navigateNext, close]);\n\n  // Show controls on mouse movement\n  useEffect(() => {\n    const handleMouseMove = () => {\n      setControlsVisible(true);\n    };\n\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, []);\n\n  if (!currentItem) return null;\n\n  const canGoPrev = !!prevItem;\n  const canGoNext = !!nextItem;\n\n  const renderMedia = (item: ArchiveItem, hidden = false) => {\n    const key = hidden ? `preload-${item.path}` : item.path;\n    const hiddenStyle = hidden ? { display: 'none' as const } : undefined;\n\n    if (item.fileType === 'video') {\n      return (\n        <video\n          key={key}\n          src={withPrefix('archive/' + item.path)}\n          autoPlay={!hidden}\n          loop={!hidden}\n          muted\n          playsInline\n          preload={hidden ? 'auto' : undefined}\n          className=\"lightbox-media\"\n          style={hiddenStyle}\n        />\n      );\n    }\n\n    return (\n      <img\n        key={key}\n        src={withPrefix('archive/' + item.path)}\n        alt={item.name}\n        className=\"lightbox-media\"\n        style={hiddenStyle}\n      />\n    );\n  };\n\n  return (\n    <div className={`lightbox-overlay ${controlsVisible ? '' : 'cursor-hidden'}`}>\n      <div className=\"lightbox-content\">\n        {renderMedia(currentItem)}\n        {prevItem ? renderMedia(prevItem, true) : null}\n        {nextItem ? renderMedia(nextItem, true) : null}\n      </div>\n\n      <div className={`lightbox-controls ${controlsVisible ? 'visible' : 'hidden'}`}>\n        <div className=\"lightbox-gradient\" />\n        <div className=\"lightbox-label\">{currentItem.name}</div>\n        <div className=\"lightbox-buttons\">\n          <button\n            className=\"lightbox-button lightbox-button-prev\"\n            onClick={navigatePrev}\n            disabled={!canGoPrev}\n            aria-label=\"Previous\"\n          >\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <polyline points=\"15 18 9 12 15 6\"></polyline>\n            </svg>\n          </button>\n          <button\n            className=\"lightbox-button lightbox-button-close\"\n            onClick={close}\n            aria-label=\"Close\"\n          >\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n          <button\n            className=\"lightbox-button lightbox-button-next\"\n            onClick={navigateNext}\n            disabled={!canGoNext}\n            aria-label=\"Next\"\n          >\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <polyline points=\"9 18 15 12 9 6\"></polyline>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { LightboxViewer } from '../components/archive/LightboxViewer';\n\n// Dedicated page for viewing archive items in a lightbox\nexport default function ArchiveViewPage() {\n  return <LightboxViewer />;\n}\n\n// Disable the default layout wrapper\nexport const Head = () => (\n  <>\n    <title>Archive Viewer</title>\n    <meta name=\"robots\" content=\"noindex\" />\n    <style>{`\n      body {\n        margin: 0;\n        padding: 0;\n        overflow: hidden;\n      }\n    `}</style>\n  </>\n);\n\n"],"names":["LightboxViewer","allItems","useArchiveData","viewableItems","useMemo","filter","item","type","fileType","currentPath","setCurrentPath","useState","controlsVisible","setControlsVisible","useEffect","readHash","window","match","location","hash","path","decodeURIComponent","addEventListener","removeEventListener","currentIndex","findIndex","currentItem","prevItem","nextItem","length","navigateTo","useCallback","index","encodedPath","encodeURIComponent","history","replaceState","navigatePrev","navigateNext","close","handleKeyDown","e","key","preventDefault","handleMouseMove","canGoPrev","canGoNext","renderMedia","hidden","hiddenStyle","display","undefined","React","src","withPrefix","autoPlay","loop","muted","playsInline","preload","className","style","alt","name","onClick","disabled","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","x1","y1","x2","y2","ArchiveViewPage","Head","content"],"sourceRoot":""}