{"version":3,"file":"component---src-pages-lounge-tsx-6a2ca09581f5101ccd65.js","mappings":"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","sources":["webpack://my-gatsby-site/./src/components/utils.ts","webpack://my-gatsby-site/./src/components/AspectFill.tsx","webpack://my-gatsby-site/./src/pages/lounge.tsx"],"sourcesContent":["import { withPrefix as wp } from 'gatsby-link'\n\nexport const withPrefix = wp;\n\nexport function uuid(): string {\n  var uuid = \"\", i, random;\n  for (i = 0; i < 32; i++) {\n    random = Math.random() * 16 | 0;\n\n    if (i == 8 || i == 12 || i == 16 || i == 20) {\n      uuid += \"-\"\n    }\n    uuid += (i == 12 ? 4 : (i == 16 ? (random & 3 | 8) : random)).toString(16);\n  }\n  return uuid;\n}\n\nexport function pick1<T>(list: T[]): T | null {\n\tif (list.length === 0) return null;\n\treturn list[(Math.random() * list.length) | 0]\n}\n\n// Modifies input\nexport function shuffle<T>(a: T[]): T[] {\n    var j, x, i;\n    for (i = a.length - 1; i > 0; i--) {\n        j = Math.floor(Math.random() * (i + 1));\n        x = a[i];\n        a[i] = a[j];\n        a[j] = x;\n    }\n    return a;\n}\n\nexport function clamp(val: number, min: number, max: number): number {\n  return Math.min(Math.max(val, min), max);\n}\n\nexport function remap(val: number, min1: number, max1: number, min2: number, max2: number): number {\n  return min2 + (val - min1) * (max2 - min2) / (max1 - min1);\n}\n\n// Returns the count of the most repeated element in the array\nexport function mostRepeats<T>(of: T[]): number {\n  if (of.length === 0) return 0;\n  const counts = new Map<T, number>();\n  for (const item of of) {\n    const count = counts.get(item) || 0;\n    counts.set(item, count + 1);\n  }\n  return Math.max(...counts.values());\n}\n\n\nexport function runWhenTabVisible(fn: () => void) {\n  if (document.visibilityState === 'visible') {\n    fn();\n  } else {\n    document.addEventListener('visibilitychange', function handler() {\n      if (document.visibilityState === 'visible') {\n        fn();\n        document.removeEventListener('visibilitychange', handler);\n      }\n    });\n  }\n}\n","import React, { ReactNode, useEffect, useRef, useState } from \"react\";\n\ninterface AspectFillProps {\n  children: ReactNode;\n  childWidth: number;\n  childHeight: number;\n  style?: React.CSSProperties;\n}\n\n/**\n * AspectFill component that scales a child component to fill the available space\n * while maintaining its aspect ratio.\n * \n * @param children - The child component to be displayed\n * @param childWidth - The intrinsic width of the child content\n * @param childHeight - The intrinsic height of the child content\n * @param style - Optional CSS styles to apply to the container\n */\nconst AspectFill: React.FC<AspectFillProps> = ({\n  children,\n  childWidth,\n  childHeight,\n  style = {},\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [scale, setScale] = useState(1);\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [containerHeight, setContainerHeight] = useState(0);\n\n  const updateScale = () => {\n    if (!containerRef.current) return;\n    \n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    \n    const newContainerWidth = containerRect.width;\n    const newContainerHeight = containerRect.height;\n    \n    // Only update if dimensions have changed\n    if (newContainerWidth !== containerWidth || newContainerHeight !== containerHeight) {\n      setContainerWidth(newContainerWidth);\n      setContainerHeight(newContainerHeight);\n      \n      // Calculate scale factors for width and height\n      const widthScale = newContainerWidth / childWidth;\n      const heightScale = newContainerHeight / childHeight;\n      \n      // Use the larger scale to ensure the content fills the container\n      const newScale = Math.max(widthScale, heightScale);\n      setScale(newScale);\n    }\n  };\n\n  useEffect(() => {\n    // Initial scale calculation\n    updateScale();\n    \n    // Set up resize observer for more precise container size changes\n    const resizeObserver = new ResizeObserver(() => {\n      updateScale();\n    });\n    \n    if (containerRef.current) {\n      resizeObserver.observe(containerRef.current);\n    }\n    \n    // Also listen to window resize events as a fallback\n    window.addEventListener(\"resize\", updateScale);\n    \n    return () => {\n      // Clean up\n      resizeObserver.disconnect();\n      window.removeEventListener(\"resize\", updateScale);\n    };\n  }, [childWidth, childHeight]);\n\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        overflow: \"hidden\",\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        ...style,\n      }}\n    >\n      <div\n        style={{\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: `translate(-50%, -50%) scale(${scale})`,\n          transformOrigin: \"center center\",\n          width: childWidth,\n          height: childHeight,\n          willChange: \"transform\",\n        }}\n      >\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default AspectFill;","import * as React from \"react\"\nimport { HeadFC, PageProps } from \"gatsby\"\nimport AspectFill from \"../components/AspectFill\";\nimport { withPrefix } from \"../components/utils\";\nimport '../components/lounge.css';\n\n/**\n * Helper function to safely use speech synthesis\n * @param text - The text to speak \n * @param onSpeechEnd - Callback for when speech ends or fails\n */\nconst speakText = (text: string, onSpeechEnd: () => void) => {\n  if (!window.speechSynthesis) {\n    console.log(\"Speech synthesis not available\");\n    onSpeechEnd();\n    return;\n  }\n  \n  try {\n    // Cancel any ongoing speech\n    window.speechSynthesis.cancel();\n    \n    const utterance = new SpeechSynthesisUtterance(text);\n    \n    // Handle speech end\n    utterance.onend = () => {\n      console.log(\"Speech synthesis completed\");\n      onSpeechEnd();\n    };\n    \n    // Handle speech errors\n    utterance.onerror = (event) => {\n      console.error(\"Speech synthesis error:\", event);\n      onSpeechEnd();\n    };\n    \n    // For iOS, we need to ensure this happens in response to user interaction\n    setTimeout(() => {\n      window.speechSynthesis.speak(utterance);\n      \n      // Add a safety timeout in case onend doesn't fire\n      setTimeout(() => {\n        if (window.speechSynthesis.speaking) {\n          console.log(\"Speech synthesis safety timeout triggered\");\n          onSpeechEnd();\n        }\n      }, 5000);\n    }, 100);\n  } catch (error) {\n    console.error(\"Speech synthesis exception:\", error);\n    onSpeechEnd();\n  }\n};\n\n/*\nffmpeg -i Video.mp4 -vf 'colorkey=0x00FF1C:similarity=0.2:blend=0.3' -c copy -c:v vp9 -f webm hello.webm\n\n\n# WebM for Chrome\nffmpeg -i Video.mp4 -vf \"colorkey=0x00FF1C:similarity=0.3:blend=0.2,scale=900:-1\" -c:v vp9 -b:v 800k -crf 31 -deadline good hello.webm\n\n\n\n\n// ffmpeg -i Video.mp4 -vf \"colorkey=0x00FF1C:similarity=0.4:blend=0.2,scale=900:-1\" -c:v qtrle -c:a aac -b:a 128k hello.mov\n\n// ffmpeg -i Video.mp4 -vf \"colorkey=0x00FF1C:similarity=0.3:blend=0.2,scale=900:-1\" -c:v hevc -tag:v hvc1 -pix_fmt yuva420p -crf 23 -c:a aac -b:a 128k hello.mp4\n\n// ffmpeg -i Video.mp4 -vf \"colorkey=0x00FF1C:similarity=0.3:blend=0.2,format=yuva420p,scale=900:-1\" -c:v hevc -tag:v hvc1 -pix_fmt yuva420p -crf 23 -c:a aac -b:a 128k hello.mp4\n\n\n// ffmpeg -framerate 25 -i unscreen-%3d.png -c:v prores_ks -pix_fmt yuva444p10le -alpha_bits 16 -profile:v 4444 -f mov -vframes 150 output.mov\n\n\nffmpeg -i Video.mp4 -vf \"colorkey=0x00FF1C:similarity=0.3:blend=0.2,format=yuva420p,scale=900\n\nPRORES:\nffmpeg -i Video.mp4 -vf \"colorkey=0x00FF1C:similarity=0.3:blend=0.2,scale=900:-1\" -c:v prores_ks -profile:v 4444 -alpha_bits 16 -c:a aac -b:a 128k hello.mov\n\nhttps://css-tricks.com/overlaying-video-with-transparency-while-wrangling-cross-browser-support/\n\nVideo is 900x496\n*/\n\n/**\n * VideoInterstitial component for loading screen and start button\n */\nconst VideoInterstitial = ({ isLoading, onStart }: { isLoading: boolean; onStart: () => void }) => {\n  return (\n    <div style={{\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"black\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      zIndex: 100\n    }}>\n      {isLoading ? (\n        <div style={{\n          color: \"white\",\n          fontSize: \"24px\",\n          fontFamily: \"Arial, sans-serif\",\n          textAlign: \"center\",\n          padding: \"20px\"\n        }}>\n          One moment...\n        </div>\n      ) : (\n        <button \n          onClick={onStart}\n          style={{\n            background: \"none\",\n            color: \"white\",\n            padding: \"15px 30px\",\n            fontSize: \"20px\",\n            fontFamily: \"Helvetica, Arial, sans-serif\",\n            cursor: \"pointer\",\n            border: 'none',\n            transition: \"all 0.3s ease\"\n          }}\n          onMouseOver={(e) => {\n            e.currentTarget.style.backgroundColor = \"rgba(255, 255, 255, 0.2)\";\n          }}\n          onMouseOut={(e) => {\n            e.currentTarget.style.backgroundColor = \"transparent\";\n          }}\n        >\n          Tap to Start\n        </button>\n      )}\n    </div>\n  );\n};\n\nconst Artboard = ({ videoRef }: { videoRef: React.RefObject<HTMLVideoElement> }) => {\n  /*\n  - 14.5 seconds: pause to alert \"What's your name?\"\n  - 17 seconds: pause video, use speech synth to read user's name, then resume video\n  */\n  \n  const isSafari = typeof window !== 'undefined' && window.navigator.userAgent.includes('Safari');\n  const videoUrl = isSafari ? withPrefix('/hello.mov') : withPrefix('/hello.webm');\n  return (\n    <div style={{background: \"rgba(223, 196, 138, 1)\", width: \"574px\", height: \"447px\", overflow: \"hidden\", position: \"relative\"}}>\n      <div style={{backgroundImage: \"url(https://media.tenor.com/vw57lq4GUHYAAAAC/starry-night-van-gogh.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"84px\", height: \"111px\", left: \"176px\", top: \"111px\", position: \"absolute\"}}></div>\n      <div onClick={() => window.close()} style={{backgroundImage: \"url(https://media.tenor.com/0FujksGZiAUAAAAi/exit.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"55px\", height: \"67px\", left: \"380px\", top: \"0px\", position: \"absolute\", transform: \"scaleX(1)\"}}></div>\n      <div style={{backgroundColor: \"rgba(234, 208, 154, 1)\", width: \"600px\", height: \"123px\", left: \"-1px\", top: \"335px\", position: \"absolute\"}}>\n        <div style={{backgroundImage: \"url(https://rmmhpcnrqakmcbvlcerx.supabase.co/storage/v1/object/sign/doc_uploads/920c01fb-b57c-4517-a9bd-14591cb14145/0c0736e4-501d-49e6-88bb-bfadb72ca67f?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJkb2NfdXBsb2Fkcy85MjBjMDFmYi1iNTdjLTQ1MTctYTliZC0xNDU5MWNiMTQxNDUvMGMwNzM2ZTQtNTAxZC00OWU2LTg4YmItYmZhZGI3MmNhNjdmIiwiaWF0IjoxNzQxNDEyMTczLCJleHAiOjMzMTgyMTIxNzN9.EjFV5A1AjeyBex1DSR5zoki-wFloY1yqqL3_Me8ofKY)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"457px\", height: \"79px\", left: \"72px\", top: \"14px\", position: \"absolute\"}}></div>\n        <div style={{backgroundColor: \"rgba(40, 37, 37, 1)\", opacity: \"0.3\", borderRadius: \"41px\", width: \"30px\", height: \"27px\", left: \"44.40402178863505px\", top: \"66.31684783911449px\", position: \"absolute\", transform: \"skewX(0deg)\", filter: \"blur(5px)\"}}></div>\n        <div style={{backgroundColor: \"rgba(40, 37, 37, 1)\", opacity: \"0.3\", width: \"105px\", height: \"19px\", left: \"481px\", top: \"8px\", position: \"absolute\", transform: \"skewX(50deg)\", filter: \"blur(5px)\"}}></div>\n      </div>\n      <div style={{backgroundImage: \"url(https://rmmhpcnrqakmcbvlcerx.supabase.co/storage/v1/object/sign/doc_uploads/920c01fb-b57c-4517-a9bd-14591cb14145/3dd7da4e-02fa-4485-aa88-478dc51b41a5?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJkb2NfdXBsb2Fkcy85MjBjMDFmYi1iNTdjLTQ1MTctYTliZC0xNDU5MWNiMTQxNDUvM2RkN2RhNGUtMDJmYS00NDg1LWFhODgtNDc4ZGM1MWI0MWE1IiwiaWF0IjoxNzQxNDEyMDk4LCJleHAiOjMzMTgyMTIwOTh9.lf1N24qUhMhOTBJYbC7HvgE9OiPykIw3quqHow8sBQo)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"305px\", height: \"169px\", left: \"142px\", top: \"209px\", position: \"absolute\"}}></div>\n      <div style={{backgroundColor: \"rgba(199, 174, 121, 1)\", width: \"140px\", height: \"445px\", left: \"0px\", top: \"-75px\", position: \"absolute\", transform: \"skewY(-27deg) scaleX(1)\"}}>\n        <div style={{backgroundImage: \"url(https://media.tenor.com/DV32ZhtLF7AAAAAC/sunset-sea.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"83px\", height: \"83px\", left: \"34px\", top: \"222px\", position: \"absolute\"}}></div>\n        <div style={{backgroundImage: \"url(https://media.tenor.com/cuJtfi_fR1AAAAAi/open-fenster.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"99px\", height: \"110px\", left: \"21px\", top: \"199px\", position: \"absolute\"}}></div>\n      </div>\n      <div style={{backgroundImage: \"url(https://media.tenor.com/w1BzPdKY2_sAAAAi/manidhaya.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"96px\", height: \"166px\", left: \"36.21580372877804px\", top: \"-25.900648891607347px\", position: \"absolute\"}}></div>\n      <div style={{backgroundImage: \"url(https://media.tenor.com/2f3vrmeHoE4AAAAi/fridge.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"136px\", height: \"214px\", left: \"452.86350031687596px\", top: \"143.76642811874854px\", position: \"absolute\"}}></div>\n      <div style={{backgroundImage: \"url(https://media.tenor.com/JBNC7IW_-1sAAAAi/groupgreeting-stickers-gg-stickers.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"99px\", height: \"123px\", left: \"169px\", top: \"105px\", position: \"absolute\"}}></div>\n      <div style={{backgroundImage: \"url(https://media.tenor.com/29mROjd-PXoAAAAi/moontrip.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"94px\", height: \"122px\", left: \"367px\", top: \"102px\", position: \"absolute\"}}></div>\n      <div style={{backgroundImage: \"url(https://media.tenor.com/OOH12fSHuREAAAAi/plant-plants.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"104px\", height: \"142px\", left: \"527.46330227795px\", top: \"333.0761355603127px\", position: \"absolute\"}}></div>\n      <div style={{backgroundImage: \"url(https://media.tenor.com/OOH12fSHuREAAAAi/plant-plants.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"104px\", height: \"142px\", left: \"12.297678445192027px\", top: \"288px\", position: \"absolute\"}}></div>\n      {/* <div style={{backgroundImage: \"url(https://rmmhpcnrqakmcbvlcerx.supabase.co/storage/v1/object/sign/doc_uploads/920c01fb-b57c-4517-a9bd-14591cb14145/71c7db71-a4eb-43dd-9e2f-c371cdffc3f4?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJkb2NfdXBsb2Fkcy85MjBjMDFmYi1iNTdjLTQ1MTctYTliZC0xNDU5MWNiMTQxNDUvNzFjN2RiNzEtYTRlYi00M2RkLTllMmYtYzM3MWNkZmZjM2Y0IiwiaWF0IjoxNzQxNDExODg5LCJleHAiOjMzMTgyMTE4ODl9.G6Wvau-pnFm04r6k4nF_gShAkb0-Es8SMTjBj0oYn8w)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"247px\", height: \"286px\", left: \"183.23357188125146px\", top: \"163.62784673121655px\", position: \"absolute\"}}></div> */}\n      <div style={{backgroundImage: \"url(https://media.tenor.com/Cvo4AhntshAAAAAi/sabrina-carpenter-lights.gif)\", backgroundSize: \"cover\", backgroundPosition: \"center\", width: \"144px\", height: \"150px\", left: \"228.78159423979906px\", top: \"-51.094934787072994px\", position: \"absolute\"}}></div>\n      <video \n        ref={videoRef}\n        width=\"900\" \n        playsInline \n        muted // Initially muted, unmuted when started\n        preload=\"metadata\" // Use metadata preload for better iOS compatibility\n        onLoadedData={() => {\n          console.log(\"Video loaded data event triggered\");\n          if (typeof window !== 'undefined') {\n            document.dispatchEvent(new Event('videoLoaded'));\n          }\n        }}\n        onProgress={() => {\n          // The progress event is more reliable on iOS Safari\n          console.log(\"Video progress event triggered\");\n          if (typeof window !== 'undefined') {\n            document.dispatchEvent(new Event('videoLoaded'));\n          }\n        }}\n        onLoadedMetadata={() => {\n          // This event also works well with preload=\"metadata\"\n          console.log(\"Video metadata loaded\");\n          if (typeof window !== 'undefined') {\n            document.dispatchEvent(new Event('videoLoaded'));\n          }\n        }}\n        onCanPlay={() => console.log(\"Video can play event triggered\")}\n        onError={(e) => console.error(\"Video loading error:\", e)}\n        src={videoUrl} \n        style={{width: \"600px\", height: \"350px\", left: \"0\", top: \"80px\", position: \"absolute\"}} \n      />\n    </div>\n  );\n};\n\n\nconst pageStyles = {\n  width: '100%',\n  height: '100vh'\n}\n\nconst ExclusiveLoungeModal: React.FC<PageProps> = () => {\n  const [mount, setMount] = React.useState(false);\n  React.useEffect(() => {\n    setMount(true);\n  }, []);\n  const videoRef = React.useRef<HTMLVideoElement>(null);\n  const [videoLoaded, setVideoLoaded] = React.useState(false);\n  const [videoStarted, setVideoStarted] = React.useState(false);\n  const userNameRef = React.useRef(\"\");\n  \n  // Use refs instead of state for tracking one-time events\n  const askedForNameRef = React.useRef(false);\n  const spokeNameRef = React.useRef(false);\n  \n  // Add event listener for video loaded event\n  React.useEffect(() => {\n    const handleVideoLoadedEvent = () => {\n      setVideoLoaded(true);\n    };\n    \n    if (typeof window !== 'undefined') {\n      document.addEventListener('videoLoaded', handleVideoLoadedEvent);\n      \n      // Clean up event listener on component unmount\n      return () => {\n        document.removeEventListener('videoLoaded', handleVideoLoadedEvent);\n      };\n    }\n  }, []);\n  \n  // Handle time-based events in the video\n  React.useEffect(() => {\n    if (!videoStarted || !videoRef.current) return;\n    \n    console.log(\"Setting up video time-based event handlers\");\n    \n    // Create timeupdate event listener for the video\n    const handleTimeUpdate = () => {\n      const currentTime = videoRef.current?.currentTime || 0;\n\n      const DEBUG = false;\n      const namePromptTime = DEBUG ? 2 : 14.5;\n      const nameSpeechTime = DEBUG ? 4 : 17;\n      \n      // At 14.5 seconds, show the name prompt using alert\n      if (currentTime >= namePromptTime && currentTime < namePromptTime + 0.5 && !askedForNameRef.current) {\n        console.log(\"Triggering name prompt at time:\", currentTime);\n        videoRef.current?.pause();\n        askedForNameRef.current = true;\n        \n        // Use browser alert to get name\n        const name = window.prompt(\"What's your name?\", \"\");\n        console.log(\"User entered name:\", name || \"(empty)\");\n        userNameRef.current = name || \"\";\n        \n        // Resume video after getting name\n        if (videoRef.current) {\n          videoRef.current.play();\n        }\n      }\n      \n      // At 17 seconds, speak the name and pause temporarily\n      if (currentTime >= nameSpeechTime && currentTime < nameSpeechTime + 0.5) {\n        console.log(\"Name speech time\")\n      }\n      if (currentTime >= nameSpeechTime && currentTime < nameSpeechTime + 0.5 && userNameRef.current !== \"\" && !spokeNameRef.current) {\n        console.log(\"Triggering name speech at time:\", currentTime);\n        spokeNameRef.current = true;\n        videoRef.current?.pause();\n        \n        // Use our helper function to speak the name\n        speakText(userNameRef.current, () => {\n          console.log(\"Speech completed or failed, resuming video\");\n          if (videoRef.current) {\n            videoRef.current.play();\n          }\n        });\n      }\n    };\n    \n    const videoElement = videoRef.current;\n    videoElement.addEventListener('timeupdate', handleTimeUpdate);\n    \n    return () => {\n      console.log(\"Cleaning up video time-based event handlers\");\n      videoElement.removeEventListener('timeupdate', handleTimeUpdate);\n    };\n  }, [videoStarted, videoRef, userNameRef]);\n  \n  // Handle start button click - starts video with sound\n  const handleStartVideo = () => {\n    if (videoRef.current) {\n      videoRef.current.muted = false; // Enable sound\n      videoRef.current.currentTime = 0; // Reset to beginning\n      videoRef.current.play(); // Start playing\n      setVideoStarted(true);\n    }\n  };\n\n  if (!mount) return <main style={{...pageStyles, backgroundColor: 'black'}} />\n\n  return (\n    <main style={pageStyles}>\n      <AspectFill childWidth={574} childHeight={445} style={{width: '100%', height: '100%'}}>\n        <div style={{ position: 'relative', width: '100%', height: '100%' }}>\n          <Artboard videoRef={videoRef} />\n          {/* Show interstitial only when video hasn't started */}\n          {!videoStarted && (\n            <VideoInterstitial \n              isLoading={!videoLoaded} \n              onStart={handleStartVideo} \n            />\n          )}\n        </div>\n      </AspectFill>\n    </main>\n  )\n}\n\nexport default ExclusiveLoungeModal\n\nexport const Head: HeadFC = () => <title>Exclusive Lounge</title>"],"names":["withPrefix","wp","uuid","i","random","Math","toString","pick1","list","length","shuffle","a","j","x","floor","remap","val","min1","max1","min2","max2","mostRepeats","of","counts","Map","item","count","get","set","max","values","runWhenTabVisible","fn","document","visibilityState","addEventListener","handler","removeEventListener","_ref","children","childWidth","childHeight","style","containerRef","useRef","scale","setScale","useState","containerWidth","setContainerWidth","containerHeight","setContainerHeight","updateScale","current","containerRect","getBoundingClientRect","newContainerWidth","width","newContainerHeight","height","widthScale","heightScale","newScale","useEffect","resizeObserver","ResizeObserver","observe","window","disconnect","React","ref","overflow","position","boxSizing","top","left","transform","transformOrigin","willChange","VideoInterstitial","isLoading","onStart","backgroundColor","display","flexDirection","justifyContent","alignItems","zIndex","color","fontSize","fontFamily","textAlign","padding","onClick","background","cursor","border","transition","onMouseOver","e","currentTarget","onMouseOut","Artboard","_ref2","videoRef","videoUrl","navigator","userAgent","includes","backgroundImage","backgroundSize","backgroundPosition","close","opacity","borderRadius","filter","playsInline","muted","preload","onLoadedData","console","log","dispatchEvent","Event","onProgress","onLoadedMetadata","onCanPlay","onError","error","src","pageStyles","ExclusiveLoungeModal","mount","setMount","videoLoaded","setVideoLoaded","videoStarted","setVideoStarted","userNameRef","askedForNameRef","spokeNameRef","handleVideoLoadedEvent","handleTimeUpdate","currentTime","_videoRef$current","namePromptTime","_videoRef$current2","pause","name","prompt","play","nameSpeechTime","_videoRef$current3","speakText","text","onSpeechEnd","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","onend","onerror","event","setTimeout","speak","speaking","videoElement","AspectFill","handleStartVideo","Head"],"sourceRoot":""}